<div class="container mx-auto p-4 relative my-20">
    <div class="flex justify-between items-center mb-4">
        <h2 class="text-2xl font-bold">My Resources</h2>
        <button (click)="toggleCreatePanel()" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
            + Create Resource
        </button>
    </div>
    @if(isLoading)
    {
    <div class="text-gray-500">Loading Resources...</div>

    <div *ngIf="err" class="text-red-500">{{err }}</div>
    }
    @else{
    <div class="mt-3">
        <h4 class="font-bold">Resources</h4>
        @for(r of resources$ | async; track r.title ){
        <ul class="list-disc pl-5 text-sm text-gray-700">

            <li> Name: {{ r.title }} </li>
            <li> Type: {{ r.type }} </li>
            <li> Time Limit: {{ r.duration }} </li>
            <li>Description: <p>{{r.description}} </p>
            </li>
              <button class="text-blue-500 text-sm mt-1" (click)="editResource(r)">
            Edit
        </button>
        </ul>
        }
      

    </div>
    }

    @if(isCreatePanelActive)
    {
    <div 
        class="fixed top-0 right-0 w-96 h-full bg-white shadow-lg p-6 z-50 transition-transform transform"
        [ngClass]="{'translate-x-0': isCreatePanelActive, 'translate-x-full': !isCreatePanelActive}">

        <div class="flex justify-between items-center mb-4">
            <h3 class="text-xl font-semibold">{{ isEditable ? 'Edit Resource' : 'Create Resource' }}</h3>
            <button (click)="toggleCreatePanel()" class="text-gray-500 hover:text-gray-700">&times;</button>
        </div>

        <app-create-resource
        [isEditMode]="isEditable"
        [resource]="editToResource"
        (createResource)="handleCreateResource($event)"
        (updateResource)="handleUpdateResource($event)"
        [goalId]="goalId"
        >
        </app-create-resource>

    </div>
    }
</div>